<?xml version="1.0"?>
<robot xmlns:xacro="http://wiki.ros.org/xacro">

  <xacro:include filename="$(find pr_description)/urdf/arm/arm.transmission.xacro" />
  <xacro:include filename="$(find pr_description)/urdf/arm/arm.gazebo.xacro" />

  <xacro:macro name="arm" params="prefix
    transmission_hw_interface:=hardware_interface/PositionJointInterface ">

    <link name="${prefix}aubo_base_link" >
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/visual/base_link.DAE" />
        </geometry>
        <material name="LightGrey">
          <color rgba="0.75294 0.75294 0.75294 1" />
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/collision/base_link.STL" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="5.3935E-09 -0.00018964 0.016438" rpy="0 0 0" />
        <mass value="0.5499" />
        <inertia
          ixx="0.0011098" ixy="-1.3808E-11" ixz="4.7155E-13"
          iyy="0.0011174" iyz="-1.2673E-05"
          izz="0.002061" />
      </inertial>
    </link>

    <joint name="${prefix}shoulder_joint" type="revolute">
      <parent link="${prefix}aubo_base_link" />
      <child link = "${prefix}shoulder_Link" />
      <origin xyz="0 0 0.122" rpy="0 0 3.1416" />
      <axis xyz="0 0 1" />
      <limit lower="-3.05" upper="3.05" effort="100" velocity="10" />
    </joint>

    <link name="${prefix}shoulder_Link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/visual/shoulder_Link.DAE" />
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/collision/shoulder_Link.STL" />
        </geometry>
      </collision>
      <!-- <xacro:cylinder_inertial radius="0.06" length="0.15" mass="${shoulder_mass}">
        <origin xyz="0.0 0.0 0.0" rpy="0 0 0" />
      </xacro:cylinder_inertial> -->
      <inertial>
        <origin xyz="3.2508868974735E-07 0.00534955349296065 -0.00883689325611056" rpy="0 0 0" />
        <mass value="1.57658348693929" />
        <inertia ixx="0.0040640448663128" ixy="0" ixz="0" iyy="0.00392863238466817" iyz="-0.000160151642851425" izz="0.0030869857349184" />
      </inertial>
    </link>

    <joint name="${prefix}upperArm_joint" type="revolute">
      <parent link="${prefix}shoulder_Link" />
      <child link = "${prefix}upperArm_Link" />
      <origin xyz="0 0.1215 0" rpy="-1.5708 -1.5708 0" />
      <axis xyz="0 0 1" />
      <limit lower="-3.05" upper="3.05" effort="1000" velocity="10" />
    </joint>

    <link name="${prefix}upperArm_Link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/visual/upperArm_Link.DAE" />
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/collision/upperArm_Link.STL" />
        </geometry>
      </collision>
      <!-- <xacro:cylinder_inertial radius="0.06" length="0.56" mass="${upper_arm_mass}">
        <origin xyz="0.0 0.0 0.28" rpy="0 0 0" />
      </xacro:cylinder_inertial> -->
      <inertial>
        <origin xyz="0.203996646979614 2.01304585036544E-10 0.0127641545395984" rpy="0 0 0" />
        <mass value="4.04175782265494" />
        <inertia ixx="0.00965399211106204" ixy="0" ixz="0" iyy="0.144993869035655" iyz="0" izz="0.142607184038966" />
      </inertial>
    </link>

    <joint name="${prefix}foreArm_joint" type="revolute">
      <parent link="${prefix}upperArm_Link" />
      <child link = "${prefix}foreArm_Link" />
      <origin xyz="0.408 0 0" rpy="-3.1416 -5.1632E-18 -5.459E-16" />
      <axis xyz="0 0 1" />
      <limit lower="-3.05" upper="3.05" effort="1000" velocity="10" />
    </joint>

    <link name="${prefix}foreArm_Link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/visual/foreArm_Link.DAE" />
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/collision/foreArm_Link.STL" />
        </geometry>
      </collision>
      <!-- <xacro:cylinder_inertial radius="0.06" length="${-a3}" mass="${forearm_mass}">
        <origin xyz="0.0 0.0 ${-a3/2}" rpy="0 0 0" />
      </xacro:cylinder_inertial> -->
      <inertial>
        <origin xyz="0.188922115560337 6.78882434739072E-07 0.0981026740461557" rpy="0 0 0" />
        <mass  value="2.27145669098343" />
        <inertia ixx="0.00214322284946289" ixy="0" ixz="-0.00073120631553383" iyy="0.0443926090878205" iyz="0" izz="0.0441273797128365" />
      </inertial>
    </link>

    <joint name="${prefix}wrist1_joint" type="revolute">
      <parent link="${prefix}foreArm_Link" />
      <child link = "${prefix}wrist1_Link" />
      <origin xyz="0.376 0 0" rpy="3.1416 -1.8323E-15 1.5708" />
      <axis xyz="0 0 1" />
      <limit lower="-3.05" upper="3.05" effort="1000" velocity="10" />
    </joint>

    <link name="${prefix}wrist1_Link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/visual/wrist1_Link.DAE" />
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/collision/wrist1_Link.STL" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="7.54205137428592E-07 0.0062481254331257 -0.00392367464072373" rpy="0 0 0" />
        <mass value="0.500477539188764" />
        <inertia ixx="0.00071194605962081" ixy="0" ixz="0" iyy="0.00040588242872958" iyz="-2.30808694377512E-05" izz="0.000685574004861334" />
      </inertial>
    </link>

    <joint name="${prefix}wrist2_joint" type="revolute">
      <parent link="${prefix}wrist1_Link" />
      <child link = "${prefix}wrist2_Link" />
      <origin xyz="0 0.1025 0" rpy="-1.5708 -1.8709E-15 -1.6653E-16" />
      <axis xyz="0 0 1" />
      <limit lower="-3.05" upper="3.05" effort="1000" velocity="10" />
    </joint>

    <link name="${prefix}wrist2_Link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/visual/wrist2_Link.DAE" />
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/collision/wrist2_Link.STL" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="-7.54207620578635E-07 -0.00624812542617262 -0.00392367464115684" rpy="0 0 0" />
        <mass value="0.500477539245988" />
        <inertia ixx="0.00071194605981829" ixy="0" ixz="0" iyy="0.000405882428755442" iyz="2.30808694515886E-05" izz="0.000685574005112107" />
      </inertial>
    </link>

    <joint name="${prefix}wrist3_joint" type="revolute">
      <parent link="${prefix}wrist2_Link" />
      <child link = "${prefix}wrist3_Link" />
      <origin xyz="0 -0.094 0" rpy="1.5708 0 1.7907E-15" />
      <axis xyz="0 0 1" />
      <limit lower="-3.05" upper="3.05" effort="1000" velocity="10" />
    </joint>

    <link name="${prefix}wrist3_Link">
      <visual>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/visual/wrist3_Link.DAE" />
        </geometry>
        <material name="LightGrey">
          <color rgba="0.7 0.7 0.7 1.0"/>
        </material>
      </visual>
      <collision>
        <origin xyz="0 0 0" rpy="0 0 0" />
        <geometry>
          <mesh filename="package://pr_description/meshes/arm/collision/wrist3_Link.STL" />
        </geometry>
      </collision>
      <inertial>
        <origin xyz="3.92048778449938E-10 0.000175788057281467 -0.0213294490706684" rpy="0 0 0" />
        <mass value="0.158309554874285" />
        <inertia ixx="7.31376196034769E-05" ixy="0" ixz="0" iyy="7.19528188876563E-05" iyz="0" izz="0.000108772439051422" />
      </inertial>
    </link>

    <joint name="${prefix}ee_fixed_joint" type="fixed">
      <parent link="${prefix}wrist3_Link" />
      <child link = "${prefix}ee_link" />
      <origin xyz="0.0 0.0 0.02" rpy="${-pi/2.0} ${-pi/2.0} 0" />
    </joint>

    <link name="${prefix}ee_link">
      <collision>
        <geometry>
          <box size="0.01 0.01 0.01"/>
        </geometry>
        <origin rpy="0 0 0" xyz="0 0 0.01"/>
      </collision>
    </link>

    <!-- extensions -->
    <xacro:arm_transmission prefix="${prefix}" hw_interface="${transmission_hw_interface}" />
    <xacro:arm_gazebo prefix="${prefix}" />


  </xacro:macro>
</robot>
